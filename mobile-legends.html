   <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top Up Mobile Legends - SiPalingTopUp</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f9ff;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        
        .game-logo {
            width: 100px;
            height: 100px;
            margin-right: 15px;
            border-radius: 10%;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e9ff;
        }
        
        header h1 {
            color: #2196F3;
            margin-bottom: 5px;
        }
        
        header p {
            color: #666;
            font-size: 14px;
        }
        
        .section {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 8px;
            background-color: #f8fbff;
            border: 1px solid #e0e9ff;
        }
        
        .section-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: #2196F3;
            display: flex;
            align-items: center;
        }
        
        .section-title span {
            margin-left: 10px;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            border: 1px solid #bbdefb;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .checkbox-group input {
            margin-right: 10px;
        }
        
        .diamond-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .diamond-item {
            border: 1px solid #bbdefb;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background-color: white;
        }
        
        .diamond-item:hover {
            border-color: #2196F3;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.1);
        }
        
        .diamond-item.selected {
            border-color: #2196F3;
            background-color: #E3F2FD;
        }
        
        .diamond-amount {
            font-weight: bold;
            font-size: 18px;
            color: #1976D2;
        }
        
        .diamond-price {
            margin-top: 5px;
            color: #333;
        }
        
        .payment-method {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #bbdefb;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: white;
        }
        
        .payment-method:hover {
            border-color: #2196F3;
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.1);
        }
        
        .payment-method.selected {
            border-color: #2196F3;
            background-color: #E3F2FD;
        }
        
        .payment-method img {
            width: 40px;
            height: 40px;
            object-fit: contain;
            margin-right: 15px;
            border-radius: 4px;
        }
        
        .payment-method .info {
            flex-grow: 1;
        }
        
        .payment-method .info h4 {
            margin-bottom: 5px;
            color: #1976D2;
        }
        
        .payment-method .info p {
            font-size: 13px;
            color: #666;
        }
        
        .best-price {
            background-color: #2196F3;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: #2196F3;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 20px;
        }
        
        .btn:hover {
            background-color: #1976D2;
        }
        
        .btn:disabled {
            background-color: #90CAF9;
            cursor: not-allowed;
        }
        
        .features {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            text-align: center;
        }
        
        .feature-item {
            flex: 1;
            padding: 10px;
        }
        
        .feature-item i {
            font-size: 24px;
            color: #2196F3;
            margin-bottom: 10px;
        }
        
        .feature-item h4 {
            margin-bottom: 5px;
            font-size: 14px;
            color: #1976D2;
        }
        
        .feature-item p {
            font-size: 12px;
            color: #666;
        }
        
        .no-selection {
            text-align: center;
            color: #999;
            padding: 20px;
            font-style: italic;
        }
        
        .payment-icon {
            width: 40px;
            height: 40px;
            margin-right: 15px;
            border-radius: 4px;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="https://raw.githubusercontent.com/SiPalingTopUp/FreeFire-Logo/refs/heads/main/unnamed.png" alt="Free Fire Logo" class="game-logo">
            </div>
            <h1>Mobile Legends</h1>
            <p>MOONTON</p>
        </header>
        
        <div class="features">
            <div class="feature-item">
                <i class="fas fa-bolt"></i>
                <h4>Proses Cepat</h4>
            </div>
            <div class="feature-item">
                <i class="fas fa-comments"></i>
                <h4>Layanan Chat 24/7</h4>
            </div>
            <div class="feature-item">
                <i class="fas fa-shield-alt"></i>
                <h4>Pembayaran Aman</h4>
            </div>
        </div>
        
        <form id="paymentForm" method="POST" action="process.php">
            <div class="section">
                <h3 class="section-title"><i class="fas fa-user"></i> <span>1. Masukkan Data Akun</span></h3>
                
                <div class="input-group">
                    <label for="player-id">ID Mobile Legends</label>
                    <input type="text" id="player-id" name="player_id" placeholder="Masukkan ID Anda" required>
                </div>
                
                <div class="input-group">
                    <label for="player-email">Email Anda</label>
                    <input type="email" id="player-email" name="player_email" placeholder="Masukkan email Anda" required>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="save-id" name="save_id">
                    <label for="save-id">Simpan ID untuk pembelian berikutnya</label>
                </div>
            </div>
        
        <div class="section">
            <h3 class="section-title"><i class="fas fa-gem"></i> <span>2. Pilih Nominal Diamond</span></h3>
            
            <div class="diamond-grid">
                <div class="diamond-item" data-amount="3" data-price="1700">
                    <div class="diamond-amount">3 Diamonds</div>
                    <div class="diamond-price">Rp 1.700</div>
                </div>
                
                <div class="diamond-item" data-amount="11" data-price="4000">
                    <div class="diamond-amount">11 Diamonds</div>
                    <div class="diamond-price">Rp 4.000</div>
                </div>
                
                <div class="diamond-item" data-amount="17" data-price="5500">
                    <div class="diamond-amount">17 Diamonds</div>
                    <div class="diamond-price">Rp 5.500</div>
                </div>
                
                <div class="diamond-item" data-amount="44" data-price="12500">
                    <div class="diamond-amount">44 Diamonds</div>
                    <div class="diamond-price">Rp 12.500</div>
                </div>
                
                <div class="diamond-item" data-amount="50" data-price="14800">
                    <div class="diamond-amount">50 Diamonds</div>
                    <div class="diamond-price">Rp 14.800</div>
                </div>
                
                <div class="diamond-item" data-amount="74" data-price="20700">
                    <div class="diamond-amount">74 Diamonds</div>
                    <div class="diamond-price">Rp 20.700</div>
                </div>
                
                <div class="diamond-item" data-amount="122" data-price="34600">
                    <div class="diamond-amount">122 Diamonds</div>
                    <div class="diamond-price">Rp 34.600</div>
                </div>
                
                <div class="diamond-item" data-amount="220" data-price="59800">
                    <div class="diamond-amount">220 Diamonds</div>
                    <div class="diamond-price">Rp 59.800</div>
                </div>
                
                <div class="diamond-item"
                data-amount="257"
                data-price="70600">
                    <div class="diamond-amount">257 Diamonds
                    </div>
                    <div class="diamond-price">
                  Rp 70.600</div>
                </div>
                
                <div class="diamond-item"
                data-amount="366"
                data-price="101600">
                    <div class="diamond-amount">366 Diamonds
                    </div>
                    <div class="diamond-price">
                  Rp 101.600</div>
                </div>
                
                <div class="diamond-item"
                data-amount="568"
                data-price="147560">
                    <div class="diamond-amount">568 Diamonds
                    </div>
                    <div class="diamond-price">
                  Rp 157.560</div>
                </div>
                
                <div class="diamond-item"
                data-amount="758"
                data-price="202600">
                    <div class="diamond-amount">758 Diamonds
                    </div>
                    <div class="diamond-price">
                  Rp 202.600</div>
                </div>
                
                <div class="diamond-item"
                data-amount="1050"
                data-price="272200">
                    <div class="diamond-amount">1050 Diamonds
                    </div>
                    <div class="diamond-price">
                  Rp 272.200</div>
                </div>
                
                <div class="diamond-item"
                data-amount="1220"
                data-price="318100">
                    <div class="diamond-amount">1220 Diamonds
                    </div>
                    <div class="diamond-price">
                  Rp 318.100</div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h3 class="section-title"><i class="fas fa-credit-card"></i> <span>3. Pilih Metode Pembayaran</span></h3>
            
            <div class="payment-method" data-method="qris">
                <img src="https://raw.githubusercontent.com/SiPalingTopUp/Qriss-Logo/refs/heads/main/images.png" alt="QRIS" class="payment-icon">
                <div class="info">
                    <h4>QRIS <span class="best-price">BEST PRICE</span></h4>
                    <p>Lebih praktis, semua pembayaran bisa tinggal scan aja</p>
                </div>
                <i class="fas fa-check-circle"></i>
            </div>
            
            <div class="payment-method" data-method="gopay">
                <img src="https://raw.githubusercontent.com/SiPalingTopUp/Gopay-Logo/refs/heads/main/images%20(1).png" alt="GoPay" class="payment-icon">
                <div class="info">
                    <h4>GoPay</h4>
                    <p>Pembayaran via GoPay</p>
                </div>
                <i class="fas fa-check-circle"></i>
            </div>
            
            <div class="payment-method selected" data-method="dana">
                <img src="https://raw.githubusercontent.com/SiPalingTopUp/Dana-Logo/refs/heads/main/images%20(1).jpeg" alt="DANA" class="payment-icon">
                <div class="info">
                    <h4>DANA</h4>
                    <p>Pembayaran via DANA</p>
                </div>
                <i class="fas fa-check-circle" style="color: #2196F3;"></i>
            </div>
            
            <div class="payment-method" data-method="ovo">
                <img src="https://raw.githubusercontent.com/SiPalingTopUp/OVO-Logo/refs/heads/main/images%20(2).jpeg" alt="OVO" class="payment-icon">
                <div class="info">
                    <h4>OVO</h4>
                    <p>Pembayaran via OVO</p>
                </div>
                <i class="fas fa-check-circle"></i>
            </div>
        </div>
        
        <div class="no-selection">
            Belum ada item produk yang dipilih.
        </div>
        
        <button type="submit" class="btn" disabled>Pesan Sekarang</button>
    </form>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Fungsi untuk format harga (tetap sama)
        function formatPrice(price) {
            return parseInt(price).toLocaleString('id-ID');
        }
        
        // Fungsi untuk generate transaction ID (tetap sama)
        function generateTransactionId() {
            const now = new Date();
            const dateStr = now.toISOString().replace(/-|:|\.\d+/g, '');
            return `FF-${dateStr}-${Math.floor(1000 + Math.random() * 9000)}`;
        }
        
        // Pilih diamond (tetap sama)
        const diamondItems = document.querySelectorAll('.diamond-item');
        let selectedDiamond = null;
        const pesanSekarangBtn = document.querySelector('.btn');
        
        diamondItems.forEach(item => {
            item.addEventListener('click', function() {
                diamondItems.forEach(i => i.classList.remove('selected'));
                this.classList.add('selected');
                selectedDiamond = {
                    amount: this.getAttribute('data-amount'),
                    price: this.getAttribute('data-price')
                };
                
                document.querySelector('.no-selection').textContent = 
                    `${selectedDiamond.amount} Diamonds - Rp ${formatPrice(selectedDiamond.price)}`;
                pesanSekarangBtn.disabled = false;
                pesanSekarangBtn.style.backgroundColor = '#2196F3';
            });
        });
        
        // Pilih metode pembayaran (tetap sama)
        const paymentMethods = document.querySelectorAll('.payment-method');
        let selectedPaymentMethod = 'dana';
        
        paymentMethods.forEach(method => {
            method.addEventListener('click', function() {
                paymentMethods.forEach(m => {
                    m.classList.remove('selected');
                    m.querySelector('.fa-check-circle').style.color = '';
                });
                
                this.classList.add('selected');
                this.querySelector('.fa-check-circle').style.color = '#2196F3';
                selectedPaymentMethod = this.getAttribute('data-method');
            });
        });

        // =============================================
        // BAGIAN YANG DIUBAH: Form Submission Handler
        // =============================================
        document.getElementById('paymentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // 1. Validasi Data
            if (!selectedDiamond || selectedDiamond.amount === "0") {
                alert('Silakan pilih nominal diamond yang valid');
                return;
            }
            
            const playerId = document.getElementById('player-id').value;
            const playerEmail = document.getElementById('player-email').value;
            
            if (!playerId || !playerEmail) {
                alert('Harap lengkapi semua data yang diperlukan');
                return;
            }
            
            // 2. Siapkan Data Transaksi
            const transactionId = generateTransactionId();
            const timestamp = new Date().toLocaleString();
            const form = e.target;

            // 3. Tambahkan Input Tersembunyi ke Form
            function addHiddenInput(name, value) {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = name;
                input.value = value;
                form.appendChild(input);
            }
            
            addHiddenInput('transaction_id', transactionId);
            addHiddenInput('player_id', playerId);
            addHiddenInput('player_email', playerEmail);
            addHiddenInput('save_id', document.getElementById('save-id').checked ? '1' : '0');
            addHiddenInput('diamond_amount', selectedDiamond.amount);
            addHiddenInput('diamond_price', selectedDiamond.price);
            addHiddenInput('payment_method', selectedPaymentMethod.toUpperCase());
            addHiddenInput('timestamp', timestamp);
            
            // 4. Simpan Data untuk Halaman Sukses
            sessionStorage.setItem('lastTransaction', JSON.stringify({
                transaction_id: transactionId,
                player_id: playerId,
                player_email: playerEmail,
                diamond_amount: selectedDiamond.amount,
                diamond_price: selectedDiamond.price,
                payment_method: selectedPaymentMethod.toUpperCase(),
                timestamp: timestamp,
                status: 'Pending'
            }));
            
            // 5. Submit Form ke process.php
            form.submit(); // Ini akan mengirim data ke action="process.php"
        });
    });

    // Fungsi redirectToPayment (tetap sama)
    function redirectToPayment(paymentMethod, amount) {
        const paymentNumber = '881026244417';
        const note = `TopUp FF ${amount} Diamond`;
        let appDeepLink = '';
        let webFallback = '';
        let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        switch(paymentMethod) {
            case 'dana':
                appDeepLink = `dana://v1/transfer?phoneNumber=${paymentNumber}&amount=${amount}&notes=${encodeURIComponent(note)}`;
                webFallback = `https://m.dana.id/m/transfer?phoneNumber=${paymentNumber}&amount=${amount}`;
                break;
            case 'ovo':
                appDeepLink = `ovo://transfer?phone=${paymentNumber}&amount=${amount}&message=${encodeURIComponent(note)}`;
                webFallback = `https://ovo.id/transfer?phone=${paymentNumber}&amount=${amount}`;
                break;
            case 'gopay':
                appDeepLink = `gopay://payment?phone=${paymentNumber}&amount=${amount}&notes=${encodeURIComponent(note)}`;
                webFallback = `https://gopay.com/pay/${paymentNumber}?amount=${amount}`;
                break;
            case 'qris':
                window.location.href = `https://qris.id/pay?amount=${amount}`;
                return;
        }

        if (isMobile) {
            window.location.href = appDeepLink;
            setTimeout(() => { if (!document.hidden) window.location.href = webFallback; }, 1000);
        } else {
            window.location.href = webFallback;
        }
    }
</script>